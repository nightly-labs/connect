volumes:
  timescaledb_data:
    driver: local
    driver_opts:
      type: 'none'
      o: 'bind'
      device: ./target
  timescaledb_backups:
    driver: local
    driver_opts:
      type: 'none'
      o: 'bind'
      device: ./backups

services:
  timescaledb:
    image: timescale/timescaledb-ha:pg15
    ports:
      - 5432:5432
    volumes:
      - timescaledb_data:/home/postgres/pgdata/data
      # - timescaledb_backups:/backups
    env_file:
      - .env
    environment:
      - POSTGRES_USER
      - POSTGRES_PASSWORD
      - POSTGRES_DB
      - TIMESCALEDB_TELEMETRY=off
